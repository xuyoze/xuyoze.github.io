
<!DOCTYPE html>
<html lang="zh-cn">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="ç¨‹åºå‘˜çš„åšå®¢">
    <title>CentOS å®‰è£…Nginxæ­¥éª¤ - ç¨‹åºå‘˜çš„åšå®¢</title>
    <meta name="author" content="Yoze">
    
    
    
    <script type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Yoze","sameAs":["https://github.com/xuyoze"],"image":"avator.png"},"articleBody":"CentOS ä¸‹å®‰è£…Nginxç›¸å…³æ­¥éª¤,ä»¥åŠä¸€äº›å¸¸è§çš„é”™è¯¯.\næœ¬ç¯‡æ–‡ç« å†…å®¹ä¸ºè½¬è½½å†…å®¹ï¼ŒåŸæ–‡ä¸ºåšå®¢å›­åšä¸»hafiz,æŸ¥çœ‹åŸæ–‡è¯·ç§»æ­¥Centos7å®‰è£…Nginxå®æˆ˜\n\n\n\nä¸€ã€èƒŒæ™¯æœ€è¿‘åœ¨å†™ä¸€äº›è‡ªå·±çš„é¡¹ç›®ï¼Œç”¨åˆ°äº†nginxï¼Œæ‰€ä»¥è‡ªå·±åŠ¨æ‰‹æ¥åœ¨Centos7ä¸Šå®‰è£…nginx,ä»¥ä¸‹æ˜¯å®‰è£…æ­¥éª¤ã€‚\näºŒã€åŸºæœ¬æ¦‚å¿µä»¥åŠåº”ç”¨åœºæ™¯1.ä»€ä¹ˆæ˜¯nginxNginxæ˜¯ä¸€æ¬¾ä½¿ç”¨Cè¯­è¨€å¼€å‘çš„é«˜æ€§èƒ½çš„http æœåŠ¡å™¨/åå‘ä»£ç†æœåŠ¡å™¨åŠç”µå­é‚®ä»¶ï¼ˆIMAP/POP3ï¼‰ä»£ç†æœåŠ¡å™¨ã€‚ç”±ä¿„ç½—æ–¯çš„ç¨‹åºè®¾è®¡å¸ˆIgor Sysoevæ‰€å¼€å‘ï¼Œå®˜æ–¹æµ‹è¯•nginxèƒ½å¤Ÿæ”¯æ”¯æ’‘5ä¸‡å¹¶å‘é“¾æ¥ï¼Œå¹¶ä¸”cpuã€å†…å­˜ç­‰èµ„æºæ¶ˆè€—å´éå¸¸ä½ï¼Œè¿è¡Œéå¸¸ç¨³å®šã€‚\n2.Nginxçš„åº”ç”¨åœºæ™¯1)ã€httpæœåŠ¡å™¨ã€‚Nginxæ˜¯ä¸€ä¸ªhttpæœåŠ¡å¯ä»¥ç‹¬ç«‹æä¾›httpæœåŠ¡ã€‚å¯ä»¥åšç½‘é¡µé™æ€æœåŠ¡å™¨ã€‚\n2)ã€è™šæ‹Ÿä¸»æœºã€‚å¯ä»¥å®ç°åœ¨ä¸€å°æœåŠ¡å™¨è™šæ‹Ÿå‡ºå¤šä¸ªç½‘ç«™ã€‚ä¾‹å¦‚ä¸ªäººç½‘ç«™ä½¿ç”¨çš„è™šæ‹Ÿä¸»æœºã€‚\n3)ã€åå‘ä»£ç†ï¼Œè´Ÿè½½å‡è¡¡ã€‚å½“ç½‘ç«™çš„è®¿é—®é‡è¾¾åˆ°ä¸€å®šç¨‹åº¦åï¼Œå•å°æœåŠ¡å™¨ä¸èƒ½æ»¡è¶³ç”¨æˆ·çš„è¯·æ±‚æ—¶ï¼Œéœ€è¦ç”¨å¤šå°æœåŠ¡å™¨é›†ç¾¤å¯ä»¥ä½¿ç”¨nginxåšåå‘ä»£ç†ã€‚å¹¶ä¸”å¤šå°æœåŠ¡å™¨å¯ä»¥å¹³å‡åˆ†æ‹…è´Ÿè½½ï¼Œä¸ä¼šå› ä¸ºæŸå°æœåŠ¡å™¨è´Ÿè½½é«˜å®•æœºè€ŒæŸå°æœåŠ¡å™¨é—²ç½®çš„æƒ…å†µã€‚\nä¸‰ã€å®‰è£…æ­¥éª¤1.æ£€æŸ¥å¹¶å®‰è£…æ‰€éœ€çš„ä¾èµ–è½¯ä»¶1).gcc:nginxç¼–è¯‘ä¾èµ–gccç¯å¢ƒyum install gcc-c++\n2).pcre:(Perl Compatible Regular Expressions)æ˜¯ä¸€ä¸ªPerlåº“ï¼ŒåŒ…æ‹¬ perl å…¼å®¹çš„æ­£åˆ™è¡¨è¾¾å¼åº“ã€‚nginxçš„httpæ¨¡å—ä½¿ç”¨pcreæ¥è§£ææ­£åˆ™è¡¨è¾¾å¼.yum install -y pcre pcre-devel\n3).zlibï¼šè¯¥åº“æä¾›äº†å¾ˆå¤šç§å‹ç¼©å’Œè§£å‹ç¼©çš„æ–¹å¼ï¼Œnginxä½¿ç”¨zlibå¯¹httpåŒ…çš„å†…å®¹è¿›è¡Œgzipã€‚yum install -y zlib zlib-devel\n4).openssl:ä¸€ä¸ªå¼ºå¤§çš„å®‰å…¨å¥—æ¥å­—å±‚å¯†ç åº“ï¼Œå›Šæ‹¬ä¸»è¦çš„å¯†ç ç®—æ³•ã€å¸¸ç”¨çš„å¯†é’¥å’Œè¯ä¹¦å°è£…ç®¡ç†åŠŸèƒ½åŠSSLåè®®ï¼Œå¹¶æä¾›ä¸°å¯Œçš„åº”ç”¨ç¨‹åºä¾›æµ‹è¯•æˆ–å…¶å®ƒç›®çš„ä½¿ç”¨ã€‚nginxä¸ä»…æ”¯æŒhttpåè®®ï¼Œè¿˜æ”¯æŒhttpsï¼ˆå³åœ¨sslåè®®ä¸Šä¼ è¾“httpï¼‰.yum install -y openssl openssl-devel\n2.ä¸‹è½½nginxæºç åŒ…ä¸‹è½½å‘½ä»¤ï¼šwget http://nginx.org/download/nginx-1.12.0.tar.gz\n3.è§£å‹ç¼©æºç åŒ…å¹¶è¿›å…¥1).è§£å‹ç¼©ï¼štar -zxvf nginx-1.12.0.tar.gz2).è¿›å…¥è§£å‹ç¼©åæ–‡ä»¶å¤¹ï¼šcd nginx-1.12.0\n4.é…ç½®ç¼–è¯‘å‚æ•°(å¯ä»¥ä½¿ç”¨./configure â€“helpæŸ¥è¯¢è¯¦ç»†å‚æ•°)å‘½ä»¤ï¼š./configure \\--prefix=/usr/local/nginx \\--pid-path=/var/run/nginx/nginx.pid \\--lock-path=/var/lock/nginx.lock \\--error-log-path=/var/log/nginx/error.log \\--http-log-path=/var/log/nginx/access.log \\--with-http_gzip_static_module \\--http-client-body-temp-path=/var/temp/nginx/client \\--http-proxy-temp-path=/var/temp/nginx/proxy \\--http-fastcgi-temp-path=/var/temp/nginx/fastcgi \\--http-uwsgi-temp-path=/var/temp/nginx/uwsgi \\--http-scgi-temp-path=/var/temp/nginx/scgi\næ³¨ï¼šå®‰è£…ä¹‹å‰éœ€è¦æ‰‹åŠ¨åˆ›å»ºä¸Šé¢æŒ‡å®šçš„nginxæ–‡ä»¶å¤¹ï¼Œå³/var/tempã€/var/temp/nginxã€/var/run/nginx/æ–‡ä»¶å¤¹ï¼Œå¦åˆ™å¯åŠ¨æ—¶æŠ¥é”™\n5.ç¼–è¯‘å¹¶å®‰è£…make &amp;&amp; make install\nå¯ä»¥è¿›å…¥/usr/local/nginxæŸ¥çœ‹æ–‡ä»¶æ˜¯å¦å­˜åœ¨confã€sbinã€htmlæ–‡ä»¶å¤¹ï¼Œè‹¥å­˜åœ¨åˆ™å®‰è£…æˆåŠŸ\n6.å¯åŠ¨nginx1).è¿›å…¥å®‰è£…ç›®å½•whereis nginx# /usr/local/nginxcd /usr/local/nginx/sbin/\n2).å¯åŠ¨./nginx\n3).è‹¥æŠ¥é”™ï¼š[emerg] open() &quot;/var/run/nginx/nginx.pid&quot; failed (2: No such file or directory)\néœ€è¦æŸ¥çœ‹ä¸‹æ˜¯ä¸æ˜¯åœ¨/var/runæ–‡ä»¶å¤¹ä¸‹ä¸å­˜åœ¨nginxæ–‡ä»¶å¤¹ï¼Œä¸å­˜åœ¨åˆ™æ–°å»º\n4).æŸ¥çœ‹æ˜¯å¦å¯åŠ¨ï¼šps -ef | grep nginx\nå¦‚æœæœ‰masterå’Œworkerä¸¤ä¸ªè¿›ç¨‹è¯æ˜å¯åŠ¨æˆåŠŸ\næ³¨æ„ï¼šæ‰§è¡Œ./nginxå¯åŠ¨nginxï¼Œè¿™é‡Œå¯ä»¥ -c æŒ‡å®šåŠ è½½çš„nginxé…ç½®æ–‡ä»¶ï¼Œå¦‚ä¸‹ï¼š./nginx -c /usr/local/nginx/conf/nginx.conf\nå¦‚æœä¸æŒ‡å®š -cï¼Œnginxåœ¨å¯åŠ¨æ—¶é»˜è®¤åŠ è½½conf/nginx.confæ–‡ä»¶ï¼Œæ­¤æ–‡ä»¶çš„åœ°å€ä¹Ÿå¯ä»¥åœ¨ç¼–è¯‘å®‰è£…nginxæ—¶æŒ‡å®š./configureçš„å‚æ•°(â€“conf-path= æŒ‡å‘é…ç½®æ–‡ä»¶ï¼ˆnginx.confï¼‰)\n7.åœæ­¢1).æš´åˆ©kill(ä¸æ¨èä½¿ç”¨)kill -9 processId\n2).å¿«é€Ÿåœæ­¢cd /usr/local/nginx/sbin &amp;&amp; ./nginx -s stop\næ­¤æ–¹å¼ç›¸å½“äºå…ˆæŸ¥å‡ºnginxè¿›ç¨‹idå†ä½¿ç”¨killå‘½ä»¤å¼ºåˆ¶æ€æ‰è¿›ç¨‹\n3).å®Œæ•´åœæ­¢(å»ºè®®ä½¿ç”¨)cd /usr/local/nginx/sbin &amp;&amp; ./nginx -s quit\næ­¤æ–¹å¼åœæ­¢æ­¥éª¤æ˜¯å¾…nginxè¿›ç¨‹å¤„ç†ä»»åŠ¡å®Œæ¯•è¿›è¡Œåœæ­¢\n8.é‡å¯åŠé‡æ–°åŠ è½½é…ç½®1.å…ˆåœæ­¢å†å¯åŠ¨ï¼ˆå»ºè®®ä½¿ç”¨ï¼‰./nginx -s quit &amp;&amp; ./nginx\n2.é‡æ–°åŠ è½½é…ç½®æ–‡ä»¶./nginx -s reload\n9.æµ‹è¯•nginxå®‰è£…æˆåŠŸï¼Œå¯åŠ¨nginx,å³å¯é€šè¿‡ipåœ°å€æ¥è®¿é—®nginx:\né—®é¢˜æ±‡æ€»CentOS é˜²ç«å¢™\nCentOS 7.0é»˜è®¤ä½¿ç”¨çš„æ˜¯firewallä½œä¸ºé˜²ç«å¢™ï¼Œè¿™é‡Œæ”¹ä¸ºiptablesé˜²ç«å¢™æ­¥éª¤ã€‚\n\n\nå…³é—­firewallï¼š\nsystemctl stop firewalld.service #åœæ­¢firewallsystemctl disable firewalld.service #ç¦æ­¢firewallå¼€æœºå¯åŠ¨firewall-cmd --state #æŸ¥çœ‹é»˜è®¤é˜²ç«å¢™çŠ¶æ€ï¼ˆå…³é—­åæ˜¾ç¤ºnotrunningï¼Œå¼€å¯åæ˜¾ç¤ºrunningï¼‰systemctl restart firewalld.service #é‡å¯firewallfirewall-cmd --query-port=80/tcp #æŸ¥è¯¢ç«¯å£æ˜¯å¦å¼€æ”¾firewall-cmd --add-port=80/tcp #å¼€å¯æŒ‡å®šç«¯å£\n\niptablesé˜²ç«å¢™ï¼ˆè¿™é‡Œiptableså·²ç»å®‰è£…ï¼Œä¸‹é¢è¿›è¡Œé…ç½®ï¼‰\nvi /etc/sysconfig/iptables-config Â #ç¼–è¾‘é˜²ç«å¢™é…ç½®æ–‡ä»¶\n\n\n# sampleconfiguration for iptables service# you can edit thismanually or use system-config-firewall# please do not askus to add additional ports/services to this default configuration*filter:INPUT ACCEPT [0:0]:FORWARD ACCEPT[0:0]:OUTPUT ACCEPT[0:0]-A INPUT -m state--state RELATED,ESTABLISHED -j ACCEPT-A INPUT -p icmp -jACCEPT-A INPUT -i lo -jACCEPT-A INPUT -p tcp -mstate --state NEW -m tcp --dport 22 -j ACCEPT-A INPUT -p tcp -m state --state NEW -m tcp --dport 80 -jACCEPT-A INPUT -p tcp -m state --state NEW -m tcp --dport 8080-j ACCEPT-A INPUT -j REJECT--reject-with icmp-host-prohibited-A FORWARD -jREJECT --reject-with icmp-host-prohibitedCOMMIT\n:wq! #ä¿å­˜é€€å‡º\nå¤‡æ³¨ï¼šè¿™é‡Œä½¿ç”¨80å’Œ8080ç«¯å£ä¸ºä¾‹ã€‚***éƒ¨åˆ†ä¸€èˆ¬æ·»åŠ åˆ°â€œ-A INPUT -p tcp -m state â€“state NEW -m tcpâ€“dport 22 -j ACCEPTâ€è¡Œçš„ä¸Šé¢æˆ–è€…ä¸‹é¢ï¼Œåˆ‡è®°ä¸è¦æ·»åŠ åˆ°æœ€åä¸€è¡Œï¼Œå¦åˆ™é˜²ç«å¢™é‡å¯åä¸ç”Ÿæ•ˆã€‚\n\nsystemctl restart iptables.service #æœ€åé‡å¯é˜²ç«å¢™ä½¿é…ç½®ç”Ÿæ•ˆsystemctl enable iptables.service #è®¾ç½®é˜²ç«å¢™å¼€æœºå¯åŠ¨","dateCreated":"2018-01-04T12:20:58+08:00","dateModified":"2018-01-04T17:15:35+08:00","datePublished":"2018-01-04T12:20:58+08:00","description":"CentOS ä¸‹å®‰è£…Nginxç›¸å…³æ­¥éª¤,ä»¥åŠä¸€äº›å¸¸è§çš„é”™è¯¯.\næœ¬ç¯‡æ–‡ç« å†…å®¹ä¸ºè½¬è½½å†…å®¹ï¼ŒåŸæ–‡ä¸ºåšå®¢å›­åšä¸»hafiz,æŸ¥çœ‹åŸæ–‡è¯·ç§»æ­¥Centos7å®‰è£…Nginxå®æˆ˜\n","headline":"CentOS å®‰è£…Nginxæ­¥éª¤","image":["nginx.png"],"mainEntityOfPage":{"@type":"WebPage","@id":"http://xuyoze.github.io/2018/01/04/centos-intall-nginx/"},"publisher":{"@type":"Organization","name":"Yoze","sameAs":["https://github.com/xuyoze"],"image":"avator.png","logo":{"@type":"ImageObject","url":"avator.png"}},"url":"http://xuyoze.github.io/2018/01/04/centos-intall-nginx/","keywords":"centos, nginx","thumbnailUrl":"nginx.png"}</script>
    <meta name="description" content="CentOS ä¸‹å®‰è£…Nginxç›¸å…³æ­¥éª¤,ä»¥åŠä¸€äº›å¸¸è§çš„é”™è¯¯. æœ¬ç¯‡æ–‡ç« å†…å®¹ä¸ºè½¬è½½å†…å®¹ï¼ŒåŸæ–‡ä¸ºåšå®¢å›­åšä¸»hafiz,æŸ¥çœ‹åŸæ–‡è¯·ç§»æ­¥Centos7å®‰è£…Nginxå®æˆ˜">
<meta name="keywords" content="centos,nginx">
<meta property="og:type" content="blog">
<meta property="og:title" content="CentOS å®‰è£…Nginxæ­¥éª¤">
<meta property="og:url" content="http://xuyoze.github.io/2018/01/04/centos-intall-nginx/index.html">
<meta property="og:site_name" content="ç¨‹åºå‘˜çš„åšå®¢">
<meta property="og:description" content="CentOS ä¸‹å®‰è£…Nginxç›¸å…³æ­¥éª¤,ä»¥åŠä¸€äº›å¸¸è§çš„é”™è¯¯. æœ¬ç¯‡æ–‡ç« å†…å®¹ä¸ºè½¬è½½å†…å®¹ï¼ŒåŸæ–‡ä¸ºåšå®¢å›­åšä¸»hafiz,æŸ¥çœ‹åŸæ–‡è¯·ç§»æ­¥Centos7å®‰è£…Nginxå®æˆ˜">
<meta property="og:locale" content="zh-cn">
<meta property="og:image" content="http://xuyoze.github.io/2018/01/04/centos-intall-nginx/894443-20170522211619117-1585471045.png">
<meta property="og:image" content="http://xuyoze.github.io/2018/01/04/centos-intall-nginx/894443-20170522211459382-336608973.png">
<meta property="og:updated_time" content="2018-01-04T09:15:35.879Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="CentOS å®‰è£…Nginxæ­¥éª¤">
<meta name="twitter:description" content="CentOS ä¸‹å®‰è£…Nginxç›¸å…³æ­¥éª¤,ä»¥åŠä¸€äº›å¸¸è§çš„é”™è¯¯. æœ¬ç¯‡æ–‡ç« å†…å®¹ä¸ºè½¬è½½å†…å®¹ï¼ŒåŸæ–‡ä¸ºåšå®¢å›­åšä¸»hafiz,æŸ¥çœ‹åŸæ–‡è¯·ç§»æ­¥Centos7å®‰è£…Nginxå®æˆ˜">
<meta name="twitter:image" content="http://xuyoze.github.io/2018/01/04/centos-intall-nginx/894443-20170522211619117-1585471045.png">
<meta name="twitter:creator" content="@yoze">
    
    
        
    
    
        <meta property="og:image" content="http://xuyoze.github.io/assets/images/avator.png"/>
    
    
        <meta property="og:image" content="http://xuyoze.github.io/2018/01/04/centos-intall-nginx/nginx.png"/>
        <meta class="swiftype" name="image" data-type="enum" content="http://xuyoze.github.io/2018/01/04/centos-intall-nginx/nginx.png" />
    
    
    
    <!--STYLES-->
    <link rel="stylesheet" href="/assets/css/style-c4ozcsklz4kht2pebhp44xorvyverh23toayhn7i6ubrpyedak24hv1v0hyd.min.css">
    <!--STYLES END-->
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-111753291-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-111753291-1');
    </script>


    
    <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?d484c06aa1636ad18eeb208942d6f840";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
    </script>

</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    
        
            
        
    

<header id="header" data-behavior="4">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a class="header-title-link" href="/ ">ç¨‹åºå‘˜çš„åšå®¢</a>
    </div>
    
        
            <a class="header-right-picture " href="#about">
        
        
            <img class="header-picture" src="/assets/images/avator.png" alt="ä½œè€…çš„å›¾ç‰‡">
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="4">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a href="/#about">
                    <img class="sidebar-profile-picture" src="/assets/images/avator.png" alt="ä½œè€…çš„å›¾ç‰‡">
                </a>
                <h4 class="sidebar-profile-name">Yoze</h4>
                
                    <h5 class="sidebar-profile-bio"><p>[æŠ–è…¿æ‚£è€…] [è½»åº¦å¼ºè¿«ç—‡] [é“å¾·è´¥å] [æ·±äº•å†°] [æ“…æ’¸ç ] [å–œçœ‹å‰§] [æˆ¿å¥´]</p>
</h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/ " title="é¦–é¡µ">
                    
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">é¦–é¡µ</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/all-categories" title="åˆ†ç±»">
                    
                        <i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">åˆ†ç±»</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/all-tags" title="æ ‡ç­¾">
                    
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">æ ‡ç­¾</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/all-archives" title="å½’æ¡£">
                    
                        <i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">å½’æ¡£</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="#about" title="å…³äº">
                    
                        <i class="sidebar-button-icon fa fa-question" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">å…³äº</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="https://github.com/xuyoze" target="_blank" rel="noopener" title="GitHub">
                    
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="4"
                 class="
                        hasCoverMetaIn
                        ">
                
<article class="post">
    
    
        <div class="post-header main-content-wrap text-left">
    
        <h1 class="post-title">
            CentOS å®‰è£…Nginxæ­¥éª¤
        </h1>
    
    
        <div class="post-meta">
    <time datetime="2018-01-04T12:20:58+08:00">
	
		    1æœˆ 04, 2018
    	
    </time>
    
        <span>å‘å¸ƒåœ¨ </span>
        
    <a class="category-link" href="/categories/reprint/">è½¬è½½</a>


    
</div>

    
</div>

    
    <div class="post-content markdown">
        <div class="main-content-wrap">
            <p>CentOS ä¸‹å®‰è£…Nginxç›¸å…³æ­¥éª¤,ä»¥åŠä¸€äº›å¸¸è§çš„é”™è¯¯.</p>
<div class="alert info"><p>æœ¬ç¯‡æ–‡ç« å†…å®¹ä¸ºè½¬è½½å†…å®¹ï¼ŒåŸæ–‡ä¸ºåšå®¢å›­åšä¸»<a href="http://www.cnblogs.com/hafiz/" target="_blank" rel="noopener">hafiz</a>,æŸ¥çœ‹åŸæ–‡è¯·ç§»æ­¥<a href="http://www.cnblogs.com/hafiz/p/6891458.html" target="_blank" rel="noopener">Centos7å®‰è£…Nginxå®æˆ˜</a></p>
</div>
<a id="more"></a>
<h1 id="table-of-contents">ç›®å½•</h1><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#ä¸€ã€èƒŒæ™¯"><span class="toc-text">ä¸€ã€èƒŒæ™¯</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#äºŒã€åŸºæœ¬æ¦‚å¿µä»¥åŠåº”ç”¨åœºæ™¯"><span class="toc-text">äºŒã€åŸºæœ¬æ¦‚å¿µä»¥åŠåº”ç”¨åœºæ™¯</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-ä»€ä¹ˆæ˜¯nginx"><span class="toc-text">1.ä»€ä¹ˆæ˜¯nginx</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-Nginxçš„åº”ç”¨åœºæ™¯"><span class="toc-text">2.Nginxçš„åº”ç”¨åœºæ™¯</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ä¸‰ã€å®‰è£…æ­¥éª¤"><span class="toc-text">ä¸‰ã€å®‰è£…æ­¥éª¤</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-æ£€æŸ¥å¹¶å®‰è£…æ‰€éœ€çš„ä¾èµ–è½¯ä»¶"><span class="toc-text">1.æ£€æŸ¥å¹¶å®‰è£…æ‰€éœ€çš„ä¾èµ–è½¯ä»¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-ä¸‹è½½nginxæºç åŒ…"><span class="toc-text">2.ä¸‹è½½nginxæºç åŒ…</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-è§£å‹ç¼©æºç åŒ…å¹¶è¿›å…¥"><span class="toc-text">3.è§£å‹ç¼©æºç åŒ…å¹¶è¿›å…¥</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-é…ç½®ç¼–è¯‘å‚æ•°-å¯ä»¥ä½¿ç”¨-configure-â€“helpæŸ¥è¯¢è¯¦ç»†å‚æ•°"><span class="toc-text">4.é…ç½®ç¼–è¯‘å‚æ•°(å¯ä»¥ä½¿ç”¨./configure â€“helpæŸ¥è¯¢è¯¦ç»†å‚æ•°)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-ç¼–è¯‘å¹¶å®‰è£…"><span class="toc-text">5.ç¼–è¯‘å¹¶å®‰è£…</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-å¯åŠ¨nginx"><span class="toc-text">6.å¯åŠ¨nginx</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-åœæ­¢"><span class="toc-text">7.åœæ­¢</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-é‡å¯åŠé‡æ–°åŠ è½½é…ç½®"><span class="toc-text">8.é‡å¯åŠé‡æ–°åŠ è½½é…ç½®</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-æµ‹è¯•"><span class="toc-text">9.æµ‹è¯•</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#é—®é¢˜æ±‡æ€»"><span class="toc-text">é—®é¢˜æ±‡æ€»</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#CentOS-é˜²ç«å¢™"><span class="toc-text">CentOS é˜²ç«å¢™</span></a></li></ol></li></ol>
<h2 id="ä¸€ã€èƒŒæ™¯"><a href="#ä¸€ã€èƒŒæ™¯" class="headerlink" title="ä¸€ã€èƒŒæ™¯"></a>ä¸€ã€èƒŒæ™¯</h2><p>æœ€è¿‘åœ¨å†™ä¸€äº›è‡ªå·±çš„é¡¹ç›®ï¼Œç”¨åˆ°äº†nginxï¼Œæ‰€ä»¥è‡ªå·±åŠ¨æ‰‹æ¥åœ¨Centos7ä¸Šå®‰è£…nginx,ä»¥ä¸‹æ˜¯å®‰è£…æ­¥éª¤ã€‚</p>
<h2 id="äºŒã€åŸºæœ¬æ¦‚å¿µä»¥åŠåº”ç”¨åœºæ™¯"><a href="#äºŒã€åŸºæœ¬æ¦‚å¿µä»¥åŠåº”ç”¨åœºæ™¯" class="headerlink" title="äºŒã€åŸºæœ¬æ¦‚å¿µä»¥åŠåº”ç”¨åœºæ™¯"></a>äºŒã€åŸºæœ¬æ¦‚å¿µä»¥åŠåº”ç”¨åœºæ™¯</h2><h3 id="1-ä»€ä¹ˆæ˜¯nginx"><a href="#1-ä»€ä¹ˆæ˜¯nginx" class="headerlink" title="1.ä»€ä¹ˆæ˜¯nginx"></a>1.ä»€ä¹ˆæ˜¯nginx</h3><p>Nginxæ˜¯ä¸€æ¬¾ä½¿ç”¨Cè¯­è¨€å¼€å‘çš„é«˜æ€§èƒ½çš„http æœåŠ¡å™¨/åå‘ä»£ç†æœåŠ¡å™¨åŠç”µå­é‚®ä»¶ï¼ˆIMAP/POP3ï¼‰ä»£ç†æœåŠ¡å™¨ã€‚ç”±ä¿„ç½—æ–¯çš„ç¨‹åºè®¾è®¡å¸ˆIgor Sysoevæ‰€å¼€å‘ï¼Œå®˜æ–¹æµ‹è¯•nginxèƒ½å¤Ÿæ”¯æ”¯æ’‘5ä¸‡å¹¶å‘é“¾æ¥ï¼Œå¹¶ä¸”cpuã€å†…å­˜ç­‰èµ„æºæ¶ˆè€—å´éå¸¸ä½ï¼Œè¿è¡Œéå¸¸ç¨³å®šã€‚</p>
<h3 id="2-Nginxçš„åº”ç”¨åœºæ™¯"><a href="#2-Nginxçš„åº”ç”¨åœºæ™¯" class="headerlink" title="2.Nginxçš„åº”ç”¨åœºæ™¯"></a>2.Nginxçš„åº”ç”¨åœºæ™¯</h3><p>1)ã€httpæœåŠ¡å™¨ã€‚Nginxæ˜¯ä¸€ä¸ªhttpæœåŠ¡å¯ä»¥ç‹¬ç«‹æä¾›httpæœåŠ¡ã€‚å¯ä»¥åšç½‘é¡µé™æ€æœåŠ¡å™¨ã€‚</p>
<p>2)ã€è™šæ‹Ÿä¸»æœºã€‚å¯ä»¥å®ç°åœ¨ä¸€å°æœåŠ¡å™¨è™šæ‹Ÿå‡ºå¤šä¸ªç½‘ç«™ã€‚ä¾‹å¦‚ä¸ªäººç½‘ç«™ä½¿ç”¨çš„è™šæ‹Ÿä¸»æœºã€‚</p>
<p>3)ã€åå‘ä»£ç†ï¼Œè´Ÿè½½å‡è¡¡ã€‚å½“ç½‘ç«™çš„è®¿é—®é‡è¾¾åˆ°ä¸€å®šç¨‹åº¦åï¼Œå•å°æœåŠ¡å™¨ä¸èƒ½æ»¡è¶³ç”¨æˆ·çš„è¯·æ±‚æ—¶ï¼Œéœ€è¦ç”¨å¤šå°æœåŠ¡å™¨é›†ç¾¤å¯ä»¥ä½¿ç”¨nginxåšåå‘ä»£ç†ã€‚å¹¶ä¸”å¤šå°æœåŠ¡å™¨å¯ä»¥å¹³å‡åˆ†æ‹…è´Ÿè½½ï¼Œä¸ä¼šå› ä¸ºæŸå°æœåŠ¡å™¨è´Ÿè½½é«˜å®•æœºè€ŒæŸå°æœåŠ¡å™¨é—²ç½®çš„æƒ…å†µã€‚</p>
<h2 id="ä¸‰ã€å®‰è£…æ­¥éª¤"><a href="#ä¸‰ã€å®‰è£…æ­¥éª¤" class="headerlink" title="ä¸‰ã€å®‰è£…æ­¥éª¤"></a>ä¸‰ã€å®‰è£…æ­¥éª¤</h2><h3 id="1-æ£€æŸ¥å¹¶å®‰è£…æ‰€éœ€çš„ä¾èµ–è½¯ä»¶"><a href="#1-æ£€æŸ¥å¹¶å®‰è£…æ‰€éœ€çš„ä¾èµ–è½¯ä»¶" class="headerlink" title="1.æ£€æŸ¥å¹¶å®‰è£…æ‰€éœ€çš„ä¾èµ–è½¯ä»¶"></a>1.æ£€æŸ¥å¹¶å®‰è£…æ‰€éœ€çš„ä¾èµ–è½¯ä»¶</h3><p>1).gcc:nginxç¼–è¯‘ä¾èµ–gccç¯å¢ƒ<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">yum install gcc-c++</span><br></pre></td></tr></table></figure></p>
<p>2).pcre:(Perl Compatible Regular Expressions)æ˜¯ä¸€ä¸ªPerlåº“ï¼ŒåŒ…æ‹¬ perl å…¼å®¹çš„æ­£åˆ™è¡¨è¾¾å¼åº“ã€‚nginxçš„httpæ¨¡å—ä½¿ç”¨pcreæ¥è§£ææ­£åˆ™è¡¨è¾¾å¼.<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">yum install -y pcre pcre-devel</span><br></pre></td></tr></table></figure></p>
<p>3).zlibï¼šè¯¥åº“æä¾›äº†å¾ˆå¤šç§å‹ç¼©å’Œè§£å‹ç¼©çš„æ–¹å¼ï¼Œnginxä½¿ç”¨zlibå¯¹httpåŒ…çš„å†…å®¹è¿›è¡Œgzipã€‚<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">yum install -y zlib zlib-devel</span><br></pre></td></tr></table></figure></p>
<p>4).openssl:ä¸€ä¸ªå¼ºå¤§çš„å®‰å…¨å¥—æ¥å­—å±‚å¯†ç åº“ï¼Œå›Šæ‹¬ä¸»è¦çš„å¯†ç ç®—æ³•ã€å¸¸ç”¨çš„å¯†é’¥å’Œè¯ä¹¦å°è£…ç®¡ç†åŠŸèƒ½åŠSSLåè®®ï¼Œå¹¶æä¾›ä¸°å¯Œçš„åº”ç”¨ç¨‹åºä¾›æµ‹è¯•æˆ–å…¶å®ƒç›®çš„ä½¿ç”¨ã€‚nginxä¸ä»…æ”¯æŒhttpåè®®ï¼Œè¿˜æ”¯æŒhttpsï¼ˆå³åœ¨sslåè®®ä¸Šä¼ è¾“httpï¼‰.<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">yum install -y openssl openssl-devel</span><br></pre></td></tr></table></figure></p>
<h3 id="2-ä¸‹è½½nginxæºç åŒ…"><a href="#2-ä¸‹è½½nginxæºç åŒ…" class="headerlink" title="2.ä¸‹è½½nginxæºç åŒ…"></a>2.ä¸‹è½½nginxæºç åŒ…</h3><p>ä¸‹è½½å‘½ä»¤ï¼š<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">wget http://nginx.org/download/nginx-1.12.0.tar.gz</span><br></pre></td></tr></table></figure></p>
<h3 id="3-è§£å‹ç¼©æºç åŒ…å¹¶è¿›å…¥"><a href="#3-è§£å‹ç¼©æºç åŒ…å¹¶è¿›å…¥" class="headerlink" title="3.è§£å‹ç¼©æºç åŒ…å¹¶è¿›å…¥"></a>3.è§£å‹ç¼©æºç åŒ…å¹¶è¿›å…¥</h3><p>1).è§£å‹ç¼©ï¼štar -zxvf nginx-1.12.0.tar.gz<br>2).è¿›å…¥è§£å‹ç¼©åæ–‡ä»¶å¤¹ï¼šcd nginx-1.12.0</p>
<h3 id="4-é…ç½®ç¼–è¯‘å‚æ•°-å¯ä»¥ä½¿ç”¨-configure-â€“helpæŸ¥è¯¢è¯¦ç»†å‚æ•°"><a href="#4-é…ç½®ç¼–è¯‘å‚æ•°-å¯ä»¥ä½¿ç”¨-configure-â€“helpæŸ¥è¯¢è¯¦ç»†å‚æ•°" class="headerlink" title="4.é…ç½®ç¼–è¯‘å‚æ•°(å¯ä»¥ä½¿ç”¨./configure â€“helpæŸ¥è¯¢è¯¦ç»†å‚æ•°)"></a>4.é…ç½®ç¼–è¯‘å‚æ•°(å¯ä»¥ä½¿ç”¨./configure â€“helpæŸ¥è¯¢è¯¦ç»†å‚æ•°)</h3><p>å‘½ä»¤ï¼š<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">./configure \</span><br><span class="line">--prefix=/usr/<span class="built_in">local</span>/nginx \</span><br><span class="line">--pid-path=/var/run/nginx/nginx.pid \</span><br><span class="line">--lock-path=/var/lock/nginx.lock \</span><br><span class="line">--error-log-path=/var/<span class="built_in">log</span>/nginx/error.log \</span><br><span class="line">--http-log-path=/var/<span class="built_in">log</span>/nginx/access.log \</span><br><span class="line">--with-http_gzip_static_module \</span><br><span class="line">--http-client-body-temp-path=/var/temp/nginx/client \</span><br><span class="line">--http-proxy-temp-path=/var/temp/nginx/proxy \</span><br><span class="line">--http-fastcgi-temp-path=/var/temp/nginx/fastcgi \</span><br><span class="line">--http-uwsgi-temp-path=/var/temp/nginx/uwsgi \</span><br><span class="line">--http-scgi-temp-path=/var/temp/nginx/scgi</span><br></pre></td></tr></table></figure></p>
<p>æ³¨ï¼šå®‰è£…ä¹‹å‰éœ€è¦æ‰‹åŠ¨åˆ›å»ºä¸Šé¢æŒ‡å®šçš„nginxæ–‡ä»¶å¤¹ï¼Œå³<code>/var/temp</code>ã€<code>/var/temp/nginx</code>ã€<code>/var/run/nginx/</code>æ–‡ä»¶å¤¹ï¼Œå¦åˆ™å¯åŠ¨æ—¶æŠ¥é”™</p>
<h3 id="5-ç¼–è¯‘å¹¶å®‰è£…"><a href="#5-ç¼–è¯‘å¹¶å®‰è£…" class="headerlink" title="5.ç¼–è¯‘å¹¶å®‰è£…"></a>5.ç¼–è¯‘å¹¶å®‰è£…</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥è¿›å…¥<code>/usr/local/nginx</code>æŸ¥çœ‹æ–‡ä»¶æ˜¯å¦å­˜åœ¨confã€sbinã€htmlæ–‡ä»¶å¤¹ï¼Œè‹¥å­˜åœ¨åˆ™å®‰è£…æˆåŠŸ</p>
<h3 id="6-å¯åŠ¨nginx"><a href="#6-å¯åŠ¨nginx" class="headerlink" title="6.å¯åŠ¨nginx"></a>6.å¯åŠ¨nginx</h3><p>1).è¿›å…¥å®‰è£…ç›®å½•<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">whereis nginx</span><br><span class="line"><span class="comment"># /usr/local/nginx</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> /usr/<span class="built_in">local</span>/nginx/sbin/</span><br></pre></td></tr></table></figure></p>
<p>2).å¯åŠ¨<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">./nginx</span><br></pre></td></tr></table></figure></p>
<p>3).è‹¥æŠ¥é”™ï¼š<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[emerg] open() &quot;/var/run/nginx/nginx.pid&quot; failed (2: No such file or directory)</span><br></pre></td></tr></table></figure></p>
<p>éœ€è¦æŸ¥çœ‹ä¸‹æ˜¯ä¸æ˜¯åœ¨/var/runæ–‡ä»¶å¤¹ä¸‹ä¸å­˜åœ¨nginxæ–‡ä»¶å¤¹ï¼Œä¸å­˜åœ¨åˆ™æ–°å»º</p>
<p>4).æŸ¥çœ‹æ˜¯å¦å¯åŠ¨ï¼š<code>ps -ef | grep nginx</code></p>
<p>å¦‚æœæœ‰masterå’Œworkerä¸¤ä¸ªè¿›ç¨‹è¯æ˜å¯åŠ¨æˆåŠŸ<br><img src="/2018/01/04/centos-intall-nginx/894443-20170522211619117-1585471045.png" title="nginx"></p>
<p>æ³¨æ„ï¼šæ‰§è¡Œ<code>./nginx</code>å¯åŠ¨nginxï¼Œè¿™é‡Œå¯ä»¥ <code>-c</code> æŒ‡å®šåŠ è½½çš„nginxé…ç½®æ–‡ä»¶ï¼Œå¦‚ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">./nginx -c /usr/local/nginx/conf/nginx.conf</span><br></pre></td></tr></table></figure></p>
<p>å¦‚æœä¸æŒ‡å®š <code>-c</code>ï¼Œnginxåœ¨å¯åŠ¨æ—¶é»˜è®¤åŠ è½½<code>conf/nginx.conf</code>æ–‡ä»¶ï¼Œæ­¤æ–‡ä»¶çš„åœ°å€ä¹Ÿå¯ä»¥åœ¨ç¼–è¯‘å®‰è£…nginxæ—¶æŒ‡å®š<code>./configure</code>çš„å‚æ•°(â€“conf-path= æŒ‡å‘é…ç½®æ–‡ä»¶ï¼ˆnginx.confï¼‰)</p>
<h3 id="7-åœæ­¢"><a href="#7-åœæ­¢" class="headerlink" title="7.åœæ­¢"></a>7.åœæ­¢</h3><p>1).æš´åˆ©kill(ä¸æ¨èä½¿ç”¨)<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">kill -9 processId</span><br></pre></td></tr></table></figure></p>
<p>2).å¿«é€Ÿåœæ­¢<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">cd /usr/local/nginx/sbin &amp;&amp; ./nginx -s stop</span><br></pre></td></tr></table></figure></p>
<p>æ­¤æ–¹å¼ç›¸å½“äºå…ˆæŸ¥å‡ºnginxè¿›ç¨‹idå†ä½¿ç”¨killå‘½ä»¤å¼ºåˆ¶æ€æ‰è¿›ç¨‹</p>
<p>3).å®Œæ•´åœæ­¢(å»ºè®®ä½¿ç”¨)<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">cd /usr/local/nginx/sbin &amp;&amp; ./nginx -s quit</span><br></pre></td></tr></table></figure></p>
<p>æ­¤æ–¹å¼åœæ­¢æ­¥éª¤æ˜¯å¾…nginxè¿›ç¨‹å¤„ç†ä»»åŠ¡å®Œæ¯•è¿›è¡Œåœæ­¢</p>
<h3 id="8-é‡å¯åŠé‡æ–°åŠ è½½é…ç½®"><a href="#8-é‡å¯åŠé‡æ–°åŠ è½½é…ç½®" class="headerlink" title="8.é‡å¯åŠé‡æ–°åŠ è½½é…ç½®"></a>8.é‡å¯åŠé‡æ–°åŠ è½½é…ç½®</h3><p>1.å…ˆåœæ­¢å†å¯åŠ¨ï¼ˆå»ºè®®ä½¿ç”¨ï¼‰<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">./nginx -s quit &amp;&amp; ./nginx</span><br></pre></td></tr></table></figure></p>
<p>2.é‡æ–°åŠ è½½é…ç½®æ–‡ä»¶<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">./nginx -s reload</span><br></pre></td></tr></table></figure></p>
<h3 id="9-æµ‹è¯•"><a href="#9-æµ‹è¯•" class="headerlink" title="9.æµ‹è¯•"></a>9.æµ‹è¯•</h3><p>nginxå®‰è£…æˆåŠŸï¼Œå¯åŠ¨nginx,å³å¯é€šè¿‡ipåœ°å€æ¥è®¿é—®nginx:<br><img src="/2018/01/04/centos-intall-nginx/894443-20170522211459382-336608973.png" title="nginx"></p>
<h2 id="é—®é¢˜æ±‡æ€»"><a href="#é—®é¢˜æ±‡æ€»" class="headerlink" title="é—®é¢˜æ±‡æ€»"></a>é—®é¢˜æ±‡æ€»</h2><h3 id="CentOS-é˜²ç«å¢™"><a href="#CentOS-é˜²ç«å¢™" class="headerlink" title="CentOS é˜²ç«å¢™"></a>CentOS é˜²ç«å¢™</h3><blockquote>
<p>CentOS 7.0é»˜è®¤ä½¿ç”¨çš„æ˜¯firewallä½œä¸ºé˜²ç«å¢™ï¼Œè¿™é‡Œæ”¹ä¸ºiptablesé˜²ç«å¢™æ­¥éª¤ã€‚</p>
</blockquote>
<ol>
<li><p>å…³é—­firewallï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">systemctl stop firewalld.service <span class="comment">#åœæ­¢firewall</span></span><br><span class="line">systemctl <span class="built_in">disable</span> firewalld.service <span class="comment">#ç¦æ­¢firewallå¼€æœºå¯åŠ¨</span></span><br><span class="line">firewall-cmd --state <span class="comment">#æŸ¥çœ‹é»˜è®¤é˜²ç«å¢™çŠ¶æ€ï¼ˆå…³é—­åæ˜¾ç¤ºnotrunningï¼Œå¼€å¯åæ˜¾ç¤ºrunningï¼‰</span></span><br><span class="line">systemctl restart firewalld.service <span class="comment">#é‡å¯firewall</span></span><br><span class="line">firewall-cmd --query-port=80/tcp <span class="comment">#æŸ¥è¯¢ç«¯å£æ˜¯å¦å¼€æ”¾</span></span><br><span class="line">firewall-cmd --add-port=80/tcp <span class="comment">#å¼€å¯æŒ‡å®šç«¯å£</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>iptablesé˜²ç«å¢™ï¼ˆè¿™é‡Œiptableså·²ç»å®‰è£…ï¼Œä¸‹é¢è¿›è¡Œé…ç½®ï¼‰</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vi /etc/sysconfig/iptables-config Â <span class="comment">#ç¼–è¾‘é˜²ç«å¢™é…ç½®æ–‡ä»¶</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># sampleconfiguration for iptables service</span></span><br><span class="line"><span class="comment"># you can edit thismanually or use system-config-firewall</span></span><br><span class="line"><span class="comment"># please do not askus to add additional ports/services to this default configuration</span></span><br><span class="line"><span class="meta">*filter</span></span><br><span class="line"><span class="string">:INPUT</span> <span class="string">ACCEPT</span> <span class="string">[0:0]</span></span><br><span class="line"><span class="string">:FORWARD</span> <span class="string">ACCEPT[0:0]</span></span><br><span class="line"><span class="string">:OUTPUT</span> <span class="string">ACCEPT[0:0]</span></span><br><span class="line"><span class="bullet">-</span><span class="string">A</span> <span class="string">INPUT</span> <span class="bullet">-m</span> <span class="string">state--state</span> <span class="string">RELATED,ESTABLISHED</span> <span class="bullet">-j</span> <span class="string">ACCEPT</span></span><br><span class="line"><span class="bullet">-</span><span class="string">A</span> <span class="string">INPUT</span> <span class="bullet">-p</span> <span class="string">icmp</span> <span class="bullet">-jACCEPT</span></span><br><span class="line"><span class="bullet">-</span><span class="string">A</span> <span class="string">INPUT</span> <span class="bullet">-i</span> <span class="string">lo</span> <span class="bullet">-jACCEPT</span></span><br><span class="line"><span class="bullet">-</span><span class="string">A</span> <span class="string">INPUT</span> <span class="bullet">-p</span> <span class="string">tcp</span> <span class="bullet">-mstate</span> <span class="bullet">--state</span> <span class="string">NEW</span> <span class="bullet">-m</span> <span class="string">tcp</span> <span class="bullet">--dport</span> <span class="number">22</span> <span class="bullet">-j</span> <span class="string">ACCEPT</span></span><br><span class="line"><span class="bullet">-</span><span class="string">A</span> <span class="string">INPUT</span> <span class="bullet">-p</span> <span class="string">tcp</span> <span class="bullet">-m</span> <span class="string">state</span> <span class="bullet">--state</span> <span class="string">NEW</span> <span class="bullet">-m</span> <span class="string">tcp</span> <span class="bullet">--dport</span> <span class="number">80</span> <span class="bullet">-jACCEPT</span></span><br><span class="line"><span class="bullet">-</span><span class="string">A</span> <span class="string">INPUT</span> <span class="bullet">-p</span> <span class="string">tcp</span> <span class="bullet">-m</span> <span class="string">state</span> <span class="bullet">--state</span> <span class="string">NEW</span> <span class="bullet">-m</span> <span class="string">tcp</span> <span class="bullet">--dport</span> <span class="number">8080</span><span class="bullet">-j</span> <span class="string">ACCEPT</span></span><br><span class="line"><span class="bullet">-</span><span class="string">A</span> <span class="string">INPUT</span> <span class="bullet">-j</span> <span class="string">REJECT--reject-with</span> <span class="string">icmp-host-prohibited</span></span><br><span class="line"><span class="bullet">-</span><span class="string">A</span> <span class="string">FORWARD</span> <span class="bullet">-jREJECT</span> <span class="bullet">--reject-with</span> <span class="string">icmp-host-prohibited</span></span><br><span class="line"><span class="string">COMMIT</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">:wq! <span class="comment">#ä¿å­˜é€€å‡º</span></span><br></pre></td></tr></table></figure>
<div class="alert warning"><p>å¤‡æ³¨ï¼šè¿™é‡Œä½¿ç”¨80å’Œ8080ç«¯å£ä¸ºä¾‹ã€‚***éƒ¨åˆ†ä¸€èˆ¬æ·»åŠ åˆ°â€œ-A INPUT -p tcp -m state â€“state NEW -m tcpâ€“dport 22 -j ACCEPTâ€è¡Œçš„ä¸Šé¢æˆ–è€…ä¸‹é¢ï¼Œåˆ‡è®°ä¸è¦æ·»åŠ åˆ°æœ€åä¸€è¡Œï¼Œå¦åˆ™é˜²ç«å¢™é‡å¯åä¸ç”Ÿæ•ˆã€‚</p>
</div>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">systemctl restart iptables.service <span class="comment">#æœ€åé‡å¯é˜²ç«å¢™ä½¿é…ç½®ç”Ÿæ•ˆ</span></span><br><span class="line">systemctl <span class="built_in">enable</span> iptables.service <span class="comment">#è®¾ç½®é˜²ç«å¢™å¼€æœºå¯åŠ¨</span></span><br></pre></td></tr></table></figure>
            

        </div>
    </div>
    <div id="post-footer" class="post-footer main-content-wrap">
        
            <div class="post-footer-tags">
                <span class="text-color-light text-small">æ ‡ç­¾</span><br>
                
    <a class="tag tag--primary tag--small t-link" href="/tags/centos/">centos</a> <a class="tag tag--primary tag--small t-link" href="/tags/nginx/">nginx</a>

            </div>
        
        
            <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2018/01/04/publish-springmvc-to-tomcate-host-on-centos/" data-tooltip="å‘å¸ƒJAVA SpringMVCç«™ç‚¹åˆ°Centos7" aria-label="ä¸Šä¸€ç¯‡: å‘å¸ƒJAVA SpringMVCç«™ç‚¹åˆ°Centos7">
                
                    <i class="fa fa-angle-left" aria-hidden="true"></i>
                    <span class="hide-xs hide-sm text-small icon-ml">ä¸Šä¸€ç¯‡</span>
                </a>
            </li>
            <li class="post-action">
                
                    
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2018/01/01/using-scrapy/" data-tooltip="ç»ƒä¹ ä½¿ç”¨scrapyæ¡†æ¶æŠ“å–å›¾è™«å›¾ç‰‡" aria-label="ä¸‹ä¸€ç¯‡: ç»ƒä¹ ä½¿ç”¨scrapyæ¡†æ¶æŠ“å–å›¾è™«å›¾ç‰‡">
                
                    <span class="hide-xs hide-sm text-small icon-mr">ä¸‹ä¸€ç¯‡</span>
                    <i class="fa fa-angle-right" aria-hidden="true"></i>
                </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions" aria-label="Diesen Beitrag teilen">
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=http://xuyoze.github.io/2018/01/04/centos-intall-nginx/" title="åˆ†äº«åˆ° Twitter">
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
                <li class="post-action">
                    <a class="post-action-btn btn btn--default" href="#disqus_thread">
                        <i class="fa fa-comment"></i>
                    </a>
                </li>
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#table-of-contents" aria-label="ç›®å½•">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


        
        
            
                <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
            
        
    </div>
</article>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Powerd by
        <a href="https://hexo.io/">Hexo</a>. Theme-
        <a href="https://github.com/LouisBarranqueiro/hexo-theme-tranquilpeak">Tranquilpeak</a>
       | Copyrights &copy;
        2018. Post with ğŸ’™ by
            Yoze.
    </span>
    <br>
    <span>

    </span>
</footer>

            </div>
            
                <div id="bottom-bar" class="post-bottom-bar" data-behavior="4">
                    <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2018/01/04/publish-springmvc-to-tomcate-host-on-centos/" data-tooltip="å‘å¸ƒJAVA SpringMVCç«™ç‚¹åˆ°Centos7" aria-label="ä¸Šä¸€ç¯‡: å‘å¸ƒJAVA SpringMVCç«™ç‚¹åˆ°Centos7">
                
                    <i class="fa fa-angle-left" aria-hidden="true"></i>
                    <span class="hide-xs hide-sm text-small icon-ml">ä¸Šä¸€ç¯‡</span>
                </a>
            </li>
            <li class="post-action">
                
                    
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2018/01/01/using-scrapy/" data-tooltip="ç»ƒä¹ ä½¿ç”¨scrapyæ¡†æ¶æŠ“å–å›¾è™«å›¾ç‰‡" aria-label="ä¸‹ä¸€ç¯‡: ç»ƒä¹ ä½¿ç”¨scrapyæ¡†æ¶æŠ“å–å›¾è™«å›¾ç‰‡">
                
                    <span class="hide-xs hide-sm text-small icon-mr">ä¸‹ä¸€ç¯‡</span>
                    <i class="fa fa-angle-right" aria-hidden="true"></i>
                </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions" aria-label="Diesen Beitrag teilen">
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=http://xuyoze.github.io/2018/01/04/centos-intall-nginx/" title="åˆ†äº«åˆ° Twitter">
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
                <li class="post-action">
                    <a class="post-action-btn btn btn--default" href="#disqus_thread">
                        <i class="fa fa-comment"></i>
                    </a>
                </li>
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#table-of-contents" aria-label="ç›®å½•">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


                </div>
                
    <div id="share-options-bar" class="share-options-bar" data-behavior="4">
        <i id="btn-close-shareoptions" class="fa fa-times"></i>
        <ul class="share-options">
            
                
                
                <li class="share-option">
                    <a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=http://xuyoze.github.io/2018/01/04/centos-intall-nginx/">
                        <i class="fab fa-twitter" aria-hidden="true"></i><span>åˆ†äº«åˆ° Twitter</span>
                    </a>
                </li>
            
        </ul>
    </div>


            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <img id="about-card-picture" src="/assets/images/avator.png" alt="ä½œè€…çš„å›¾ç‰‡">
        
            <h4 id="about-card-name">Yoze</h4>
        
            <div id="about-card-bio"><p>[æŠ–è…¿æ‚£è€…] [è½»åº¦å¼ºè¿«ç—‡] [é“å¾·è´¥å] [æ·±äº•å†°] [æ“…æ’¸ç ] [å–œçœ‹å‰§] [æˆ¿å¥´]</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br>
                <p>å“’å“’å“’</p>

            </div>
        
        
            <div id="about-card-location">
                <i class="fa fa-map-marker-alt"></i>
                <br>
                Mars
            </div>
        
    </div>
</div>

        
        
<div id="cover" style="background-image:url('/assets/images/cover.jpg');"></div>
        <!--SCRIPTS-->
<script src="/assets/js/script-dbd16rvloemmuxdzniplmnxxvwoz24eya9wol0b7vvmlokgqsjivmb8dnscy.min.js"></script>
<!--SCRIPTS END-->

    
        <script>
             var disqus_config = function () {
                 this.page.url = 'http://xuyoze.github.io/2018/01/04/centos-intall-nginx/';
                 
                    this.page.identifier = '2018/01/04/centos-intall-nginx/';
                 
             };
            (function() {
                var d = document, s = d.createElement('script');
                var disqus_shortname = 'yoze';
                s.src = '//' + disqus_shortname + '.disqus.com/embed.js';

                s.setAttribute('data-timestamp', +new Date());
                (d.head || d.body).appendChild(s);
            })();
        </script>
    



    </body>
</html>
